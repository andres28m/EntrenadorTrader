<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PionexGK</title>
    <style>
        /* Estilos para el contenedor grid */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1px 1fr; /* Dos columnas con un divisor central */
            height: 100vh; /* Altura completa de la ventana */
            box-sizing: border-box; /* Asegura que el padding se incluya en el tamaño total */
            position: relative; /* Para posicionar los botones en el contenedor */
        }

        /* Estilos para cada widget */
        .tradingview-widget-container {
            width: 100%;
            height: 100%;
            overflow: hidden;
            border: none;
        }

        /* Estilos para el divisor central */
        .divider {
            width: 0px;
            background-color: #444;
        }

        /* Evitar márgenes en body */
        body {
            margin: 0;
            overflow: hidden; /* Evita el scroll */
        }

        /* Estilos para los botones */
        .control-buttons {
            position: absolute;
            top: 50%; /* Centrado verticalmente */
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
            left: 50%; /* Inicialmente centrado */
            transform: translateX(-50%);
        }

        .control-buttons button {
            width: 30px;
            height: 30px;
            border-radius: 50%; /* Hacer los botones circulares */
            font-size: 16px;
            background-color: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .control-buttons button:hover {
            background-color: #555;
        }

        /* Estilos para el icono de las flechas */
        .arrow {
            font-size: 20px;
        }
    </style>

    <style>

        .texto {
    color: #e7e7e7; /* Color del texto */
    background-color: #0072f5; /* Color de fondo */
    text-align: center; /* Centra el texto */
    padding: 10px; /* Espaciado interno */
    font-size: 2.5rem; /* Tamaño de fuente */
    font-weight: bold; /* Negrita */
    border-radius: 8px; /* Bordes redondeados */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Sombra alrededor */
    transition: background-color 0.3s ease, color 0.3s ease; /* Efecto de transición */
}




        .dashboard {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            background-color: #0a0a0a;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 100%;
            height: 100%;
            max-width: 600px;
            transition: background-color 0.3s, color 0.3s;
            overflow: auto;

            
        }

        .input-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center; /* Centra los botones horizontalmente */
    align-items: center;     /* Centra verticalmente si es necesario */
    margin-top: 20px;
}

#buyButton, #longButton, #sellButton, #shortButton {
    flex-basis: calc(50% - 10px); /* 2 botones por fila */
    padding: 10px 10px;
    font-size: 1rem;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}

#closeButton {
    flex-basis: 100%; /* Botón largo, ocupa toda la fila */
    padding: 10px 20px;
    font-size: 1rem;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    margin-bottom: 20px;
}

#buyButton {
    background-color: #4CAF50; /* Verde */
    color: white;
}

#sellButton {
    background-color: #f44336; /* Rojo */
    color: white;
}

#longButton {
    background-color: #4CAF50; /* Azul */
    color: white;
}

#shortButton {
    background-color: #f44336; /* Naranja */
    color: white;
}

#closeButton {
    background-color: #800202; /* Púrpura */
    color: white;
}

button:hover {
    opacity: 0.8;
}



        h1 {
            margin-top: 0;
        }

        .signal {
            font-size: 1.5rem;
            margin-bottom: 10px;

        }

        .price {
            font-size: 1.8rem;
            color: #fafafa;
            margin-top: 20px;
            margin-bottom: 20px;

        }


        .timer {
    flex-basis: calc(25% - 5px); /* Cada .timer ocupa el 25% del ancho del contenedor, menos 5px de espacio */
    font-size: 1rem;
    padding: 10px 10px;
    background-color: #393838;
    color: #ff4747;
    margin-top: 10px;
    margin-bottom: 10px;
    margin-right: 2px; /* Espaciado entre los elementos */
    border-radius: 3px;
    
    display: flex; /* Cambiar a display:flex para usar flexbox */
    justify-content: center; /* Centra el texto horizontalmente */
    align-items: center;     /* Centra el texto verticalmente */
    text-align: center;      /* Asegura que el texto esté centrado */
}




        .buy {
            color: green;
        }

        .sell {
            color: red;
        }

        .input-container {
            margin-top: 20px;
        }

        input, select {
            padding: 10px;
            margin: 5px;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
            border-radius: 5px;
            border: 1px solid #8b8b8b;
            transition: background-color 0.3s, color 0.3s;
        }

        

        #darkModeToggle {
            background-color: #555;
            color: white;
            margin-top: 20px;
            padding: 10px;
            margin: 3px;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
            border-radius: 5px;
            border: 1px solid #8b8b8b;
            transition: background-color 0.3s, color 0.3s;
        }

        #entryPrice ,#percentageGain  {
    flex-basis: calc(45.7% - 10px); /* 2 botones por fila */
    padding: 10px 10px;
    background-color: #f0f0f0; /* Color de fondo */
    border: 1px solid #ddd; /* Borde alrededor */
    border-radius: 5px;
    
}

        #balance {
    flex-basis: 100%; /* Texto largo que ocupa toda la fila */
    padding: 10px 10px;
    background-color: #f0f0f0; /* Color de fondo */
    border: 1px solid #ddd; /* Borde alrededor */
    border-radius: 5px;
    text-align: center; /* Centra el texto dentro del contenedor */
}

        .percentage-gain {
            font-size: 1.2rem;
            font-weight: bold;
            color: #838384;
        }

        .balance {
            font-size: 1.2rem;
            font-weight: bold;
            color: #767777;
            margin-bottom: 5px;
        }

        .entry {
            font-size: 1.2rem;
            font-weight: bold;
            color: #3c93fd;
            
        }

        .input-group {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        

        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dashboard.dark-mode {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }

        input.dark-mode, button.dark-mode, select.dark-mode {
            background-color: #333;
            color: #e0e0e0;
            border: 1px solid #444;
        }

        #darkModeToggle.dark-mode {
            background-color: #eee;
            color: rgb(158, 156, 156);
        }

        #signal {
            
            color: rgb(255, 180, 40);
        }

        

    </style>

</head>
<body>
    <div class="grid-container" id="gridContainer">

        <!-- Segundo widget de TradingView -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
            {
            "width": "100%",
            "height": "100%",
            "symbol": "PIONEX:BTCUSDT.P",
            "timezone": "Etc/UTC",
            "theme": "dark",
            "style": "1",
            "locale": "en",
            "range": "YTD",
            "hide_side_toolbar": false,
            "allow_symbol_change": true,
            "watchlist": [
                "BINANCE:BTCUSDT",
                "PIONEX:BTCUSDT.P",
                "BINANCE:ETHUSDT",
                "PIONEX:ETHUSDT.P",
                "BINANCE:SOLUSDT",
                "PIONEX:SOLUSDT.P",
                "PIONEX:WIFUSDT.P",
                "PIONEX:DOTUSDT.P",
                "PIONEX:DOGEUSDT.P",
                "PIONEX:PEPEUSDT.P",
                "PIONEX:ADAUSDT.P",
                "PIONEX:TONUSDT.P",
                "BINANCE:TONUSDT",
                "PIONEX:XRPUSDT.P",
                "PIONEX:LTCUSDT.P",
                "BINANCE:AAVEUSDT",
                "PIONEX:AAVEUSDT.P",
                "PIONEX:SHIBUSDT.P",
                "PIONEX:BNBUSDT.P",
                "PIONEX:FTMUSDT.P",
                "PIONEX:SUPERUSDT.P",
                "PIONEX:LINKUSDT.P",
                "PIONEX:XMRUSDT.P",
                "PIONEX:UNIUSDT.P",
                "PIONEX:TRXUSDT.P",
                "PIONEX:FLOKIUSDT.P",
                "PIONEX:DARUSDT.P",
                "PIONEX:MKRUSDT.P"
            ],
            "details": true,
            "hotlist": true,
            "calendar": false,
            "studies": [
                "STD;SMA",
                "STD;UP_DOWN_Volume"
            ],
            "support_host": "https://andres28m.github.io/PionexGK/"
            }
            </script>
        </div>

        <!-- Divisor central -->
        <div class="divider"></div>

        <!-- Primer widget de TradingView -->
        <div class="dashboard">
        <h1 class="texto">Entrenador Trader</h1>
        <select id="currencySelect">
            <option value="BTCUSDT" selected>Bitcoin (BTC)</option>
            <option value="ETHUSDT">Ethereum (ETH)</option>
            <option value="BNBUSDT">Binance Coin (BNB)</option>
            <option value="MKRUSDT">MKR (MKR)</option>
            <option value="TONUSDT">TONCoin (TON)</option>
            <option value="AAVEUSDT">AAVE (AAVE)</option>
            <option value="SOLUSDT">SOLANA (SOL)</option>
            <option value="TRXUSDT">TRON (TRX)</option>
            <option value="FTMUSDT">FANTON (FTM)</option>
            <!-- Agregar más opciones aquí -->
        </select>

        <div class="price" id="price"> <h4><span id="priceDisplay">---</span> USD</h4></div>
        <div class="signal" id="signal">Esperando señal...</div>

        

        <div class="input-container">
           <div class="entry" id="entryPrice">Entrada: $0.00</div>
           <div class="percentage-gain" id="percentageGain">% Ganado: 0%</div>
           <div class="balance" id="balance">Saldo: $0.00</div>
        </div>

        <select id="leverageSelect">
            <option value="1" selected>1x</option>
            <option value="2">2x</option>
            <option value="5">5x</option>
            <option value="10">10x</option>
            <option value="20">20x</option>
            <option value="50">50x</option>
            <option value="100">100x</option>
        </select>

        <div class="input-group">
        <div class="timer" id="timer-5min">5 min: 00:00</div>
        <div class="timer" id="timer-15min">15 min: 00:00</div>
        <div class="timer" id="timer-1h">1 hora: 00:00</div>
        <div class="timer" id="timer-4h">4 horas: 00:00</div>
        </div>

        <div class="input-container">
            <input type="number" id="inputAmount" placeholder="Cantidad a invertir en $" />
        </div>
        <div class="input-group">
            <input type="number" id="stopLoss" placeholder="Stop Loss (%)" />
            <input type="number" id="takeProfit" placeholder="Take Profit (%)" />
        </div>
        <div class="input-container">
            <button id="buyButton">Bull (Compra)</button>
            <button id="longButton">Long</button>
            <button id="sellButton">Sell (Venta)</button>
            <button id="shortButton">Short</button>
            <button id="closeButton">Cerrar Operación</button>
        </div>
        
        

        <button id="darkModeToggle">Modo Oscuro</button>
       
         </div>
    </div>

        <!-- Botones para controlar el redimensionamiento -->
        <div class="control-buttons" id="controlButtons">
            <button id="resizeLeft"><span class="arrow">&larr;</span></button>
            <button id="resizeRight"><span class="arrow">&rarr;</span></button>
        </div>
    </div>

    <script>
        const gridContainer = document.getElementById('gridContainer');
        const resizeLeftBtn = document.getElementById('resizeLeft');
        const resizeRightBtn = document.getElementById('resizeRight');
        const controlButtons = document.getElementById('controlButtons');

        // Proporciones actuales de las columnas (iniciamos con 50% para cada una)
        let leftColumnPercentage = 50;
        let rightColumnPercentage = 50;

        // Función para redimensionar hacia la izquierda
        resizeLeftBtn.addEventListener('click', function() {
            if (leftColumnPercentage < 80) {  // Evitar que crezca más del 80%
                leftColumnPercentage += 10;  // Incrementar el tamaño de la columna izquierda
                rightColumnPercentage -= 10; // Reducir la columna derecha
                updateGrid();
            }
        });

        // Función para redimensionar hacia la derecha
        resizeRightBtn.addEventListener('click', function() {
            if (rightColumnPercentage < 80) {  // Evitar que crezca más del 80%
                rightColumnPercentage += 10;  // Incrementar el tamaño de la columna derecha
                leftColumnPercentage -= 10;   // Reducir la columna izquierda
                updateGrid();
            }
        });

        // Actualizar las proporciones del grid y mover los botones
        function updateGrid() {
            gridContainer.style.gridTemplateColumns = `${leftColumnPercentage}% 10px ${rightColumnPercentage}%`;
            moveButtons();
        }

        // Función para mover los botones con la división
        function moveButtons() {
            // Calcular la nueva posición de los botones según el porcentaje de la primera columna
            const containerWidth = gridContainer.offsetWidth;
            const leftColumnWidth = (leftColumnPercentage / 100) * containerWidth;
            controlButtons.style.left = `${leftColumnWidth + 5}px`; // +5px para compensar el ancho del divisor
        }

        // Inicializar la posición de los botones
        moveButtons();
    </script>

  

    <script>
    let lastPrice = 0;
    let entryPrice = 0;
    let investedAmount = 0;
    let leverage = 1;
    let position = null;
    let stopLoss = null;
    let takeProfit = null;

    const priceElement = document.getElementById('priceDisplay');
    const signalElement = document.getElementById('signal');
    const balanceElement = document.getElementById('balance');
    const entryPriceElement = document.getElementById('entryPrice');

    function updatePrice(price) {
        priceElement.textContent = `Precio: $${price.toFixed(2)}`;
    }

    function updateSignal(signalType) {
        if (signalType === 'buy') {
            signalElement.textContent = 'Señal de Compra';
            signalElement.classList.add('buy');
            signalElement.classList.remove('sell');
        } else if (signalType === 'sell') {
            signalElement.textContent = 'Señal de Venta';
            signalElement.classList.add('sell');
            signalElement.classList.remove('buy');
        }
    }

    function simulateEntry(action) {
        const amount = parseFloat(document.getElementById('inputAmount').value);
        if (!amount || amount <= 0) {
            alert('Introduce una cantidad válida.');
            return;
        }
        investedAmount = amount;
        leverage = parseFloat(document.getElementById('leverageSelect').value);

        if (action === 'buy') {
            entryPrice = lastPrice;
            entryPriceElement.textContent = `Entrada: $${entryPrice.toFixed(2)}`;
            updateSignal('buy');
        } else if (action === 'sell') {
            if (entryPrice === 0) {
                alert('Primero debes realizar una compra.');
                return;
            }
            const profitOrLoss = ((lastPrice - entryPrice) * leverage) * (investedAmount / entryPrice);
            const profitPercentage = ((profitOrLoss / (investedAmount * leverage)) * 100).toFixed(2);

            let currentBalance = parseFloat(balanceElement.textContent.replace('Saldo: $', ''));
            currentBalance += profitOrLoss;
            balanceElement.textContent = `Saldo: $${currentBalance.toFixed(2)}`;
            document.getElementById('percentageGain').textContent = `Porcentaje Ganado: ${profitPercentage}%`;
            entryPrice = 0; // Resetea el precio de entrada para futuras operaciones
            entryPriceElement.textContent = 'Entrada: $0.00';
            updateSignal('Esperando señal...');
        }
    }

    function simulateFuturePosition(action) {
        const amount = parseFloat(document.getElementById('inputAmount').value);
        if (!amount || amount <= 0) {
            alert('Introduce una cantidad válida.');
            return;
        }
        investedAmount = amount;
        leverage = parseFloat(document.getElementById('leverageSelect').value);
        position = action;
        entryPrice = lastPrice;
        entryPriceElement.textContent = `Entrada: $${entryPrice.toFixed(2)}`;
        updateSignal(action === 'long' ? 'buy' : 'sell');
    }

    function closePosition() {
        if (position) {
            const profitOrLoss = position === 'long'
                ? ((lastPrice - entryPrice) * leverage) * (investedAmount / entryPrice)
                : ((entryPrice - lastPrice) * leverage) * (investedAmount / entryPrice);

            let currentBalance = parseFloat(balanceElement.textContent.replace('Saldo: $', ''));
            currentBalance += profitOrLoss;
            const profitPercentage = ((profitOrLoss / (investedAmount * leverage)) * 100).toFixed(2);

            balanceElement.textContent = `Saldo: $${currentBalance.toFixed(2)}`;
            document.getElementById('percentageGain').textContent = `Porcentaje Ganado: ${profitPercentage}%`;

            // Resetea los valores
            entryPrice = 0;
            investedAmount = 0;
            leverage = 1;
            position = null;
            entryPriceElement.textContent = 'Entrada: $0.00';
            updateSignal('Esperando señal...');
        } else {
            alert('No hay ninguna posición abierta para cerrar.');
        }
    }

    function updateBalance() {
        let currentBalance = parseFloat(balanceElement.textContent.replace('Saldo: $', ''));
        if (position) {
            const profitOrLoss = position === 'long'
                ? ((lastPrice - entryPrice) * leverage) * (investedAmount / entryPrice)
                : ((entryPrice - lastPrice) * leverage) * (investedAmount / entryPrice);

            currentBalance += profitOrLoss;
            const profitPercentage = ((profitOrLoss / (investedAmount * leverage)) * 100).toFixed(2);

            balanceElement.textContent = `Saldo: $${currentBalance.toFixed(2)}`;
            document.getElementById('percentageGain').textContent = `Porcentaje Ganado: ${profitPercentage}%`;
        }
    }

    // Temporizadores para 5m, 15m, 1h y 4h
    function startCountdown(intervalSeconds, elementId) {
        let timeLeft = intervalSeconds;
        const timerElement = document.getElementById(elementId);
        const interval = setInterval(() => {
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (timeLeft <= 0) {
                clearInterval(interval);
                timerElement.textContent = 'Listo!';
            }
        }, 1000);
    }

    // Inicializar los temporizadores
    function initializeCountdowns() {
        startCountdown(300, 'timer-5min'); // 5 minutos
        startCountdown(900, 'timer-15min'); // 15 minutos
        startCountdown(3600, 'timer-1h'); // 1 hora
        startCountdown(14400, 'timer-4h'); // 4 horas
    }

    // Obtener precio de la criptomoneda
    async function fetchCryptoPrice() {
        const currencyPair = document.getElementById('currencySelect').value; // Obtiene la criptomoneda seleccionada
        try {
            // Llamada al API de Binance para obtener el precio actual de la criptomoneda seleccionada
            const response = await fetch(`https://api.binance.com/api/v3/ticker/price?symbol=${currencyPair}`);
            const data = await response.json();

            // Obtenemos el precio actual
            const currentPrice = parseFloat(data.price);

            // Mostramos el precio en el elemento con el id 'priceDisplay'
            priceElement.textContent = currentPrice.toFixed(2);
             
            updatePrice(currentPrice);

            if (lastPrice !== 0) {
                const priceIncrease = ((currentPrice - lastPrice) / lastPrice) * 100;

                if (priceIncrease >= 1) {
                    updateSignal('buy');
                } else if (priceIncrease <= -1) {
                    updateSignal('sell');
                }

                if (priceIncrease >= 0.15 && priceIncrease < 1) {
                    alert('El precio ha subido un 0.15%');
                }
            }

            lastPrice = currentPrice;
            updateBalance();

        } catch (error) {
            console.error('Error obteniendo el precio de la criptomoneda:', error);
        }
    }

    // Eventos para los botones de compra, venta, long, short y cerrar
    document.getElementById('buyButton').addEventListener('click', () => simulateEntry('buy'));
    document.getElementById('sellButton').addEventListener('click', () => simulateEntry('sell'));
    document.getElementById('longButton').addEventListener('click', () => simulateFuturePosition('long'));
    document.getElementById('shortButton').addEventListener('click', () => simulateFuturePosition('short'));
    document.getElementById('closeButton').addEventListener('click', closePosition);

    // Evento para el selector de criptomonedas
    document.getElementById('currencySelect').addEventListener('change', fetchCryptoPrice);

    // Alternar modo oscuro
    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        document.querySelector('.dashboard').classList.toggle('dark-mode');
        document.querySelectorAll('input, button, select').forEach(el => el.classList.toggle('dark-mode'));

        if (document.body.classList.contains('dark-mode')) {
            darkModeToggle.textContent = 'Modo Claro';
        } else {
            darkModeToggle.textContent = 'Modo Oscuro';
        }
    });

    // Inicializar todo al cargar
    fetchCryptoPrice(); // Obtiene el precio al inicio
    setInterval(fetchCryptoPrice, 10000); // Actualiza el precio cada 10 segundos
    initializeCountdowns(); // Inicializa los temporizadores
</script>


   


</body>
</html>
